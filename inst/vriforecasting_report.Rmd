---
title: "Summary report of short-term forecasts for viral respiratory diseases by `vriforecasting`"
output: html_document
---

Description: 

Forecast report for each RVI (Flu-A, Flu-B, RSV, and SARS-CoV2) for all population (PLOVER) and pediatric only population (PHRDW).

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# setup -------------------------------------------------------------------
library(dplyr)
library(vriforecasting)
library(ggplot2)
library(here)
```

# Load PHRDW and PLOVER data

```{r echo=FALSE, message=FALSE, warning=FALSE}
# load plover data
#raw_plover_data <- readRDS("O:/BCCDC/Groups/Analytics/Projects/covid_modeling/06 Projects/RSV Flu Modelling/Data/plover_weekly_resp.rds")

raw_plover_data <- plover_data
# load phrdw data
#load("O:/BCCDC/Groups/Analytics/Projects/covid_modeling/06 Projects/RSV Flu Modelling/Data/phrdw_flu_daily_count_vpp_only.rData")
# named `phrdw_flu_daily_count`
#raw_phrdw_data <- phrdw_flu_daily_count

raw_phrdw_data <- phrdw_data
```

# Observed Trends in Confirmed Cases {.tabset .tabset-pills}

## PLOVER {.tabset .tabset-fade}

### Flu A 

```{r echo=FALSE}
plover_data_clean <- get_weekly_plover_by_date_type(
   raw_plover_data,
   "flu_a",
   "2019-01-01",
   "2023-12-31"
 )

ggplot(plover_data_clean, aes(x=date, y=confirm)) + geom_line()
```

### Flu B 

```{r echo=FALSE}
plover_data_clean <- get_weekly_plover_by_date_type(
   raw_plover_data,
   "flu_b",
   "2019-01-01",
   "2023-12-31"
 )

ggplot(plover_data_clean, aes(x=date, y=confirm)) + geom_line()
```


## PHRDW {.tabset .tabset-fade}

### Flu A {.tabset .tabset-fade}

```{r echo=FALSE}
phrdw_data_clean <- get_phrdw_by_type_date_age(
   raw_phrdw_data,
   "flu_a",
   "2021-01-01",
   "2023-12-31", 
   time_period = "weekly"
 )

ggplot(phrdw_data_clean, aes(x=date, y=confirm)) + geom_line()
```

### Flu B {.tabset .tabset-fade}

```{r echo=FALSE}
phrdw_data_clean <- get_phrdw_by_type_date_age(
   raw_phrdw_data,
   "flu_b",
   "2021-01-01",
   "2023-12-31",
   time_period = 'weekly'
 )

ggplot(phrdw_data_clean, aes(x=date, y=confirm)) + geom_line()
```




### RSV {.tabset .tabset-fade}

```{r echo=FALSE}
phrdw_data_clean <- get_phrdw_by_type_date_age(
   raw_phrdw_data,
   "rsv",
   "2021-01-01",
   "2023-12-31",
   time_period = 'weekly'
 )

ggplot(phrdw_data_clean, aes(x=date, y=confirm)) + geom_line()
```

# Model Forecast {.tabset}

## PLOVER {.tabset .tabset-fade}

### Previous Season {.tabset .tabset-fade}

#### Flu A {.tabset .tabset-fade}
